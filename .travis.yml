matrix:
  exclude:
    - language: ruby
      dist: precise
  include:
    - language: java
      jdk: openjdk8
      script: make local-java
      cache:
        directories:
        - "$HOME/.m2"
        - "$HOME/.sonar/cache"
      before_cache:
        - rm -rf $HOME/.m2/repository/io/cucumber
      before_install:
        - sudo apt-get install jq
        - wget -O ~/codacy-coverage-reporter-assembly-latest.jar $(curl https://api.github.com/repos/codacy/codacy-coverage-reporter/releases/latest | jq -r .assets[0].browser_download_url)
      after_success:
        - java -jar ~/codacy-coverage-reporter-assembly-latest.jar report -l Java -r build/reports/jacoco/test/jacocoTestReport.xml
      sudo: false
      dist: trusty
      addons:
        sonarcloud:
          organization: "chrisesharp-github"
    - language: go
      go:
        - "1.10"
      script: make local-go
      sudo: false
      dist: trusty
      addons:
        sonarcloud:
          organization: "chrisesharp-github"
    - language: node_js
      node_js:
        - "9.3.0"
      script: make local-node
      sudo: false
      dist: trusty
      addons:
        sonarcloud:
          organization: "chrisesharp-github"
    - language: python
      python:
        - "3.6"
      install:
        - pip install -r src/main/python/requirements.txt
        - pip install -r src/main/python/requirements-test.txt
      script: 
        - make local-python
      sudo: false
      dist: trusty
      addons:
        sonarcloud:
          organization: "chrisesharp-github"
        
